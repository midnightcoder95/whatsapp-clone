{"ast":null,"code":"import _slicedToArray from\"/home/ujwal/Desktop/projects/whatsapp-clone-firebase/whatsapp-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./SidebarChat.css\";import{Avatar}from\"@material-ui/core\";import db from\"./firebase\";import{Link}from\"react-router-dom\";function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){if(id){db.collection(\"rooms\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var createChat=function createChat(){var roomName=prompt(\"Please Enter name for chat room\");if(roomName){db.collection(\"rooms\").add({name:roomName});//do stuff\n}};return!addNewChat?/*#__PURE__*/React.createElement(Link,{to:\"/rooms/\".concat(id)},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat\"},/*#__PURE__*/React.createElement(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(seed,\".svg\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__info\"},/*#__PURE__*/React.createElement(\"h2\",null,name),/*#__PURE__*/React.createElement(\"p\",null,(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message)))):/*#__PURE__*/React.createElement(\"div\",{onClick:createChat,className:\"sidebarChat\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Add new chat \"));}export default SidebarChat;","map":{"version":3,"sources":["/home/ujwal/Desktop/projects/whatsapp-clone-firebase/whatsapp-clone/src/SidebarChat.js"],"names":["React","useState","useEffect","Avatar","db","Link","SidebarChat","id","name","addNewChat","seed","setSeed","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","createChat","roomName","prompt","add","message"],"mappings":"0LAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,mBAAP,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,QAASC,CAAAA,WAAT,MAA+C,mBAAxBC,CAAAA,EAAwB,MAAxBA,EAAwB,CAApBC,IAAoB,MAApBA,IAAoB,CAAdC,UAAc,MAAdA,UAAc,eACrBR,QAAQ,CAAC,EAAD,CADa,wCACtCS,IADsC,eAChCC,OADgC,8BAEbV,QAAQ,CAAC,EAAD,CAFK,yCAEtCW,QAFsC,eAE5BC,WAF4B,eAI7CX,SAAS,CAAC,UAAM,CACd,GAAIK,EAAJ,CAAQ,CACNH,EAAE,CAACU,UAAH,CAAc,OAAd,EACGC,GADH,CACOR,EADP,EAEGO,UAFH,CAEc,UAFd,EAGGE,OAHH,CAGW,WAHX,CAGwB,MAHxB,EAIGC,UAJH,CAIc,SAACC,QAAD,QACVL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CADD,EAJd,EAOD,CACF,CAVQ,CAUN,CAACd,EAAD,CAVM,CAAT,CAYAL,SAAS,CAAC,UAAM,CACdS,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,IAA3B,CAAD,CAAP,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,iCAAD,CAAvB,CACA,GAAID,QAAJ,CAAc,CACZtB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBc,GAAvB,CAA2B,CACzBpB,IAAI,CAAEkB,QADmB,CAA3B,EAGA;AACD,CACF,CARD,CASA,MAAO,CAACjB,UAAD,cACL,oBAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,MAAD,EAAQ,GAAG,kDAA4CG,IAA5C,QAAX,EADF,cAEE,2BAAK,SAAS,CAAC,mBAAf,eACE,8BAAKF,IAAL,CADF,cAEE,yCAAII,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAaiB,OAAjB,CAFF,CAFF,CADF,CADK,cAWL,2BAAK,OAAO,CAAEJ,UAAd,CAA0B,SAAS,CAAC,aAApC,eACE,8CADF,CAXF,CAeD,CAED,cAAenB,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./SidebarChat.css\";\nimport { Avatar } from \"@material-ui/core\";\nimport db from \"./firebase\";\nimport { Link } from \"react-router-dom\";\n\nfunction SidebarChat({ id, name, addNewChat }) {\n  const [seed, setSeed] = useState(\"\");\n  const [messages, setMessages] = useState(\"\");\n\n  useEffect(() => {\n    if (id) {\n      db.collection(\"rooms\")\n        .doc(id)\n        .collection(\"messages\")\n        .orderBy(\"timestamp\", \"desc\")\n        .onSnapshot((snapshot) =>\n          setMessages(snapshot.docs.map((doc) => doc.data()))\n        );\n    }\n  }, [id]);\n\n  useEffect(() => {\n    setSeed(Math.floor(Math.random() * 5000));\n  }, []);\n\n  const createChat = () => {\n    const roomName = prompt(\"Please Enter name for chat room\");\n    if (roomName) {\n      db.collection(\"rooms\").add({\n        name: roomName,\n      });\n      //do stuff\n    }\n  };\n  return !addNewChat ? (\n    <Link to={`/rooms/${id}`}>\n      <div className=\"sidebarChat\">\n        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\n        <div className=\"sidebarChat__info\">\n          <h2>{name}</h2>\n          <p>{messages[0]?.message}</p>\n        </div>\n      </div>\n    </Link>\n  ) : (\n    <div onClick={createChat} className=\"sidebarChat\">\n      <h2>Add new chat </h2>\n    </div>\n  );\n}\n\nexport default SidebarChat;\n"]},"metadata":{},"sourceType":"module"}